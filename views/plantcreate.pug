//- extends layout

//- block content
//-   h1= title
//-   form(action='/plants' method='POST')
//-     div.form-group
//-       label(for='plant_name') Name
//-       input#plant_name.form-control(type='text', name='plant_name' required)
//-     div.form-group
//-       label(for='plant_type') Type
//-       input#plant_type.form-control(type='text', name='plant_type' required)
//-     div.form-group
//-       label(for='plant_age') Age
//-       input#plant_age.form-control(type='number', name='plant_age' required)
//-     button.btn.btn-primary(type='submit') Add Plant

extends layout

block content
  h1= title
  link(rel='stylesheet', href='/stylesheets/style.css')

  form(id='CostumeForm', action="/resource/costumes", method="POST")
    div.form-group
      label.costumeAttr(for='costume_type') Costume Type
      input#costume_type.form-control(type='text', name='costume_type', required)

    div.form-group
      label.costumeAttr(for='size') Costume Size
      input#size.form-control(type='text', name='size', required)

    div.form-group
      label.costumeAttr(for='cost') Costume Cost
      input#cost.form-control(type='number', name='cost', required, min='0')

    button.btn.btn-primary(type='submit') Create Costume

  script.
    document.forms['CostumeForm'].addEventListener('submit', (event) => {
      event.preventDefault();

      alert("Submitting costume details...");
      fetch(event.target.action, {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams(new FormData(event.target))
      }).then((resp) => {
        if (!resp.ok) throw new Error(resp.statusText);
        return resp.json();
      }).then((body) => {
        alert("Save succeeded");
        console.log("Server response:", body);
      }).catch((error) => {
        alert("Save failed: " + error.message);
      });
    });

